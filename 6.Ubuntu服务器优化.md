## 1.服务器优化

### 1.1.调整系统时间

默认情况下的系统时间可能不正确，执行以下命令将系统时区设置为中国时区：

```bash
## 设置系统时区
sudo timedatectl set-timezone Asia/Shanghai
```

设置完成后，执行以下命令检查系统时间：

```bash
## 检查系统时区
date -R
```

当前系统使用 `systemd-timesyncd.service` 来同步时间，需要调整其使用的 NTP 服务器。  

调整 NTP 服务，逐条执行以下命令：  

```bash
## 创建 NTP 配置文件的文件夹
sudo mkdir /etc/systemd/timesyncd.conf.d

## 创建 NTP 配置文件
sudo nano /etc/systemd/timesyncd.conf.d/server_ntp.conf
```

在 `nano` 编辑器对话框中输入以下内容，并保存：  

```bash
[Time]
NTP=ntp.tencent.com ntp.aliyun.com
```

### 1.2.设置系统自动更新

配置 Ubuntu 服务器的系统自动更新，与配置 Debian 系统自动更新方法基本一致，参阅 [Debian 模板虚拟机自动更新](https://gitee.com/callmer/pve_toss_notes/blob/master/5.PVE制作虚拟机模板.md#17配置系统自动更新) 。

### 1.3.配置系统定时任务

本步骤为可选操作，主要设置服务器定时执行任务。

配置 `crontab` 之前，需要检查 `cron.service` 服务状态，确保该服务开机自启动。  

```bash
## 检查 cron.service
sudo systemctl status cron.service
```  

执行以下命令来编辑系统定时任务：

```bash
## 查看系统定时任务
sudo crontab -l

## 编辑系统定时任务，编辑器选择 nano
sudo crontab -e

## 每 3 天 PPPoE 重新拨号
0 4 */3 * * /usr/bin/systemctl restart pppd-enp6s18@serverwan.service

## 定时重启系统
0 6 8,24 * * /usr/sbin/reboot
```

### 1.4.配置ZSH

`Zsh` 是比 `Bash` 好用的 `Shell` 程序，使用 `oh-my-zsh` 进行配置：

```bash
## 返回 home 目录
cd

## 使用 curl 安装 oh-my-zsh
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

## 或者使用 wget 安装 oh-my-zsh
sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"

## 询问是否切换默认 shell，输入 Y
## 示例输出
Time to change your default shell to zsh:
Do you want to change your default shell to zsh? [Y/n] y
```

## 2.清理系统

逐条执行以下命令，注意命令中的空格：

```bash
## 清理系统软件包
sudo apt clean && sudo apt autoclean && sudo apt autoremove --purge

## 清理系统缓存
sudo rm -rvf /var/cache/apt/* /var/lib/apt/lists/* /tmp/*

## 清理系统日志
sudo find /var/log/ -type f | xargs sudo rm -rvf

## 清理命令历史记录文件
rm -rvf ~/.bash_history ~/.zsh_history

## 清理命令历史
history -c
```